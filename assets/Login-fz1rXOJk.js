import{s as V}from"./index-BaljtHQq.js";import{s as P}from"./index-CDm_ImpW.js";import{s as I}from"./index-BmREy0cR.js";import{s as C}from"./index-sGnuCcFG.js";import{_ as F}from"./FloatingConfigurator-CSNnMtOy.js";import{aV as R,aX as S,bb as A,aY as B,aT as D,r as u,c as d,d as i,a as s,F as h,aS as m,I as N,G as T,o as f}from"./index-2t5m_B8U.js";import"./index-DPEEpFT8.js";import"./index-BhExmjrM.js";import"./index-CxhJ11wg.js";import"./index-_2NOxF1M.js";const U="/auth",j=n=>R.post(`${U}/login`,n).then(e=>e.data);function E(){const n=S(),e=A();return D(),B({mutationFn:j,onSuccess:l=>{n.invalidateQueries(["auth"]),l.access_token&&(e.setAccessToken(l.access_token),e.setRefreshToken(l.refresh_token),window.location.href="/")}})}const L=n=>{if(!n)return"";const e=n.replace(/\D/g,"");return n.startsWith("+7")||n.startsWith("7")?e.length<=1?"+7":e.length<=4?`+7 (${e.slice(1)}`:e.length<=7?`+7 (${e.slice(1,4)}) ${e.slice(4)}`:e.length<=9?`+7 (${e.slice(1,4)}) ${e.slice(4,7)}-${e.slice(7)}`:`+7 (${e.slice(1,4)}) ${e.slice(4,7)}-${e.slice(7,9)}-${e.slice(9,11)}`:e.length<=3?`+7 (${e}`:e.length<=6?`+7 (${e.slice(0,3)}) ${e.slice(3)}`:e.length<=8?`+7 (${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`:`+7 (${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6,8)}-${e.slice(8,10)}`},M=n=>/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(n),K=n=>{const e=n.replace(/[^\d\s()+\-]/g,"");return L(e)},Q={class:"bg-surface-50 dark:bg-surface-950 flex items-center justify-center min-h-screen min-w-[100vw] overflow-hidden"},W={class:"flex flex-col items-center justify-center"},q={style:{"border-radius":"56px",padding:"0.3rem",background:`linear-gradient(\r
						180deg,\r
						var(--primary-color) 10%,\r
						rgba(33, 150, 243, 0) 30%\r
					)`}},G={class:"w-full bg-surface-0 dark:bg-surface-900 py-20 px-8 sm:px-20",style:{"border-radius":"53px"}},X={key:0,class:"text-red-500 block mb-6"},Y={class:"flex items-center justify-between mt-2 mb-8 gap-8"},z={class:"flex items-center"},H={key:1,class:"text-red-500 block mb-6"},ae={__name:"Login",setup(n){const e=u(""),l=u(""),p=u(!1),o=u(""),{mutate:b,isError:c}=E(),x=r=>{e.value=K(r.target.value)},g=()=>{e.value||(e.value="+7")},v=r=>{/[0-9]/.test(r.key)||r.preventDefault()},$=()=>{if(!M(e.value)){o.value="Введите корректный номер телефона";return}o.value="",parseInt(e.value.replace(/\D/g,"")),b({phone:89999999999,password:"123admin"})};return(r,t)=>{const k=C,_=I,w=P,y=V;return f(),d(T,null,[i(F),s("div",Q,[s("div",W,[s("div",q,[s("div",G,[t[7]||(t[7]=s("div",{class:"text-center mb-8"},[s("div",{class:"text-surface-900 dark:text-surface-0 text-3xl font-medium mb-4"}," Добро пожаловать! "),s("span",{class:"text-muted-color font-medium"},"Войдите чтобы продолжить")],-1)),s("div",null,[t[5]||(t[5]=s("label",{for:"email1",class:"block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"Телефон",-1)),i(k,{id:"email1",type:"tel",pattern:"[0-9]*",inputmode:"numeric",placeholder:"+7 (999) 999-99-99",class:"w-full md:w-[30rem] mb-2",modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value=a),onInput:x,onKeypress:v,onFocus:g,maxlength:"18",invalid:o.value!==""||m(c)},null,8,["modelValue","invalid"]),o.value?(f(),d("small",X,N(o.value),1)):h("",!0),t[6]||(t[6]=s("label",{for:"password1",class:"block text-surface-900 dark:text-surface-0 font-medium text-xl mb-2"},"Пароль",-1)),i(_,{id:"password1",modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value=a),placeholder:"Password",toggleMask:!0,class:"mb-4",fluid:"",feedback:!1,invalid:m(c)},null,8,["modelValue","invalid"]),s("div",Y,[s("div",z,[i(w,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=a=>p.value=a),id:"rememberme1",binary:"",class:"mr-2"},null,8,["modelValue"]),t[3]||(t[3]=s("label",{for:"rememberme1"},"Запомнить",-1))]),t[4]||(t[4]=s("span",{class:"font-medium no-underline ml-2 text-right cursor-pointer text-primary"},"Забыли пароль?",-1))]),m(c)?(f(),d("small",H,"Неверные данные для входа")):h("",!0),i(y,{label:"Войти",class:"w-full",onClick:$})])])])])])],64)}}};export{ae as default};
