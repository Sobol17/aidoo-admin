import{s as q}from"./index-GBU6WChI.js";import{s as F}from"./index-DPCV2Ee5.js";import{s as L}from"./index-C6-BjdXK.js";import{s as G}from"./index-BTML_cXl.js";import{s as H}from"./index-DC1oGjXQ.js";import{s as O}from"./index-DlurCiC_.js";import{s as Q}from"./index-GHis_ABA.js";import{s as W}from"./index-6TA9rSi8.js";import{r as g,aU as z,aR as A,aD as J,aE as K,aQ as X,c as n,d as a,aG as Y,aS as u,a as t,g as b,o as r,I as d,H as y,F as x}from"./index-z1uXvXEi.js";import{d as Z,b as ee}from"./useSubcategories-BPKGVXtK.js";import{c as C}from"./categoriesData-Bm6MGxRc.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as k}from"./index-DYBcNESa.js";import"./index-DFvs91Rb.js";import"./index-DR_CA7HW.js";import"./index-ibAaKPa9.js";import"./index-1vWsUMNt.js";import"./index-BoxnDY_1.js";import"./index-BPJ3xovF.js";import"./formatDate-l4zQ4D13.js";const oe={class:"account-container"},se={key:0,class:"flex justify-content-center align-items-center pt-5"},ae={key:1,class:"flex justify-content-center align-items-center pt-5"},le={key:2,class:"grid"},ie={class:"col-12 md:col-4 lg:col-3"},ne={class:"text-left"},re={class:"flex justify-between"},de={class:"text-xl mt-0 mb-2"},me={class:"m-0 text-lg text-500 mb-3"},ue={class:"m-0 text-lg text-500 mb-3"},pe={class:"m-0 text-lg text-500 mb-3"},ce={class:"flex flex-column gap-x-8 py-3"},ve={class:"m-0"},fe={class:"m-0"},be={class:"m-0"},_e={class:"flex flex-col gap-6"},ge={key:0,class:"text-red-500"},ye={key:0,class:"text-red-500"},xe={class:"mb-4"},ke={key:0,class:"text-red-500"},Se={class:"mb-4"},Ve={__name:"Subcategory",setup(De){const I=z(),i=g(!1),p=g(!1),{data:w,isPending:U}=Z(I.params.subcategory),s=A(()=>w.value),o=g({}),S=J();K();const V=m=>{if(!m)return"Нет данных";const e=new Date(m);return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)};function T(){var e,c,v;const m=C.find(_=>{var f;return _.code===((f=s.value)==null?void 0:f.category)});o.value={id:(e=s.value)==null?void 0:e._id,name:(c=s.value)==null?void 0:c.name,parent:m,premium:(v=s.value)==null?void 0:v.is_premium},p.value=!0}function D(){p.value=!1,i.value=!1}const{mutate:h,isPending:B}=ee({onSuccess:()=>{S.add({severity:"success",summary:"Успех",detail:"Аккаунт успешно обновлен",life:3e3})},onError:m=>{S.add({severity:"error",summary:"Ошибка",detail:"Не удалось обновить аккаунт",life:3e3})}}),N=X(),P=async()=>{h({id:s.value._id,subcategoryData:{name:o.value.name,category:o.value.parent.code,is_premium:!!o.value.premium,profile_id:N.profileID}}),D()};return(m,e)=>{const c=Y,v=W,_=Q,f=O,$=H,j=G,E=L,M=F,R=q;return r(),n("div",oe,[a(c),u(U)?(r(),n("div",se,[a(v,{style:{width:"50px",height:"50px"},strokeWidth:"8"}),e[6]||(e[6]=t("span",{class:"ml-3 font-bold"},"Загрузка данных...",-1))])):s.value?(r(),n("div",le,[t("div",ie,[a(f,{class:"h-full"},{title:b(()=>[t("div",ne,[t("div",re,[t("h2",de," Подкатегория "+d(s.value.name),1),a(u(k),{label:"Редактировать",icon:"pi pi-pencil",class:"mr-2 mb-2",onClick:e[0]||(e[0]=l=>T())})]),t("p",me,[e[7]||(e[7]=t("span",{class:"font-semibold"},"ID подкатегории",-1)),y(" "+d(s.value._id),1)]),t("p",ue,[e[8]||(e[8]=t("span",{class:"font-semibold"},"Родитель:",-1)),y(" "+d(s.value.category_name),1)]),t("p",pe,[e[9]||(e[9]=t("span",{class:"font-semibold"},"Родитель (ID):",-1)),y(" "+d(s.value.category),1)])])]),content:b(()=>[t("div",ce,[t("div",null,[e[10]||(e[10]=t("span",{class:"font-semibold text-lg block mb-2"},"Создан:",-1)),t("p",ve,d(V(s.value.created_at)),1)]),t("div",null,[e[11]||(e[11]=t("span",{class:"font-semibold text-lg block mb-2"},"Обновлен:",-1)),t("p",fe,d(V(s.value.updated_at)),1)]),t("div",null,[e[12]||(e[12]=t("span",{class:"font-semibold text-lg block mb-2"},"Премиум:",-1)),t("p",be,d(s.value.is_premium?"Да":"Нет"),1)])])]),_:1})])])):(r(),n("div",ae,[a(_,{severity:"error",text:"Пользователь не найден"})])),a(M,{visible:p.value,"onUpdate:visible":e[5]||(e[5]=l=>p.value=l),style:{width:"450px"},header:"Изменить подкатегорию",modal:!0},{footer:b(()=>[a(u(k),{label:"Отменить",icon:"pi pi-times",text:"",onClick:D}),a(u(k),{label:"Сохранить",icon:"pi pi-check",onClick:P,loading:u(B)},null,8,["loading"])]),default:b(()=>[t("div",_e,[t("div",null,[e[13]||(e[13]=t("label",{for:"name",class:"block font-bold mb-3"},"ID",-1)),a($,{id:"id",modelValue:o.value.id,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.id=l),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:i.value&&!o.value.id,fluid:"",disabled:""},null,8,["modelValue","invalid"]),i.value&&!o.value.id?(r(),n("small",ge,"Обязательное поле")):x("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{for:"name",class:"block font-bold mb-3"},"Название",-1)),a($,{id:"name",modelValue:o.value.name,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.name=l),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:i.value&&!o.value.name,fluid:""},null,8,["modelValue","invalid"]),i.value&&!o.value.name?(r(),n("small",ye,"Обязательное поле")):x("",!0)]),t("div",xe,[e[15]||(e[15]=t("div",{class:"block font-bold mb-3"},"Родительская категория",-1)),a(j,{modelValue:o.value.parent,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.parent=l),options:u(C),optionLabel:"name",placeholder:"Выберите родительскую категорию",class:"w-full",invalid:i.value&&!o.value.parent},null,8,["modelValue","options","invalid"]),i.value&&!o.value.parent?(r(),n("small",ke,"Обязательное поле")):x("",!0)]),t("div",Se,[e[16]||(e[16]=t("div",{class:"block font-bold mb-3"},"Премиум подкатегория",-1)),a(E,{modelValue:o.value.premium,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.premium=l)},null,8,["modelValue"])])])]),_:1},8,["visible"]),a(R)])}}},Qe=te(Ve,[["__scopeId","data-v-f38a1559"]]);export{Qe as default};
